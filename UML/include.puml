@startuml
class MainMenu {
    - mainPanel : GameObject
    - sourcesPanel : GameObject
    - Start() : void
    + GoToMain() : void
    + GoToSources() : void
    + OnPlayClicked() : void
}
MonoBehaviour <|-- MainMenu
class TextureScroller {
    - scrollSpeedX : float
    - scrollSpeedY : float
    - meshRenderer : MeshRenderer
    - offsetX : float
    - offsetY : float
    - Awake() : void
    - Update() : void
}
MonoBehaviour <|-- TextureScroller
class Rotator {
    - rotationSpeed : float = 50.0f
    - rotationAxis : Vector3
    - rotationSpace : Space
    - Update() : void
}
MonoBehaviour <|-- Rotator
class Lightning {
    - thunderCrackSound : AudioClip
    - destroyDistanceBehindPlayer : float = 50.0f
    - playerTransform : Transform
    - Update() : void
    - OnTriggerEnter(other:Collider) : void
}
MonoBehaviour <|-- Lightning
class CutsceneHandler {
    + tunnelUIPanel : GameObject
    + exitUIPanel : GameObject
    + TunnelCG : RawImage
    + ExitCG : RawImage
    + tunnelPromptText : Text
    + exitPromptText : Text
    + leftButton : Button
    + rightButton : Button
    + surveyButton : Button
    - tunnelCanvasGroup : CanvasGroup
    - exitCanvasGroup : CanvasGroup
    - <<const>> FADE_FRAME_COUNT : int = 90
    - Awake() : void
    + StartCutscene() : void
    - LoadTunnelCG() : IEnumerator
    - OnChoiceSelected(direction:string) : void
    - LoadExitCG(direction:string) : IEnumerator
    - FadeAll(image:RawImage, canvasGroup:CanvasGroup, startColor:Color, endColor:Color, startAlpha:float, endAlpha:float, frameCount:int) : IEnumerator
}
MonoBehaviour <|-- CutsceneHandler
class Car {
    - speed : float = 100.0f
    - _currentSpeed : float
    - driveBySound : AudioClip
    - destroyDistanceBehindPlayer : float = 250.0f
    - playerTransform : Transform
    - Awake() : void
    - FixedUpdate() : void
    - Update() : void
    - OnTriggerEnter(other:Collider) : void
}
MonoBehaviour <|-- Car
class FirebaseWebGLManager {
    - nextGroup : int = 0
    + {static} groupCounts : int[]
    + {static} Instance : FirebaseWebGLManager <<get>>
    + IsReady : bool <<get>> = false
    + {static} <<extern>> GetJSON(path:string, objectName:string, callback:string, fallback:string) : void
    - Awake() : void
    - Start() : void
    + GetCurrentGroup() : int
    - OnRequestFailed(error:string) : void
    - OnRequestSuccess1(data:string) : void
    - OnRequestSuccess2(data:string) : void
    - OnRequestSuccess3(data:string) : void
    - AssignGroup() : void
    - Log(message:string) : void
}
MonoBehaviour <|-- FirebaseWebGLManager
class SurveyManager {
    + {static} Instance : SurveyManager <<get>>
    - firebaseRegisterUrl : string = "https://us-central1-YOUR_PROJECT.cloudfunctions.net/registerUnityId"
    - surveyToken : string = "SURVEY_TOKEN"
    - surveyUrlBase : string = "https://YOUR_SURVEY_URL"
    - unityId : string
    - assignedGroup : string
    - chosenDirection : string
    - Awake() : void
    - Start() : void
    + OpenSurvey(groupName:string, finalDirection:string) : void
    - RegisterUnityId() : IEnumerator
    - LaunchSurvey() : void
    - MapGroupToCode(groupName:string) : string
    - MapDirectionToCode(directionName:string) : string
}
class UnityIdPayload {
    + token : string
    + unityId : string
    + direction : string
    + group : string
}
MonoBehaviour <|-- SurveyManager
SurveyManager +-- UnityIdPayload
class GroundTile {
    - snailPrefab : GameObject
    - tileDestroyThresholdZ : float = 168.0f
    - snailSpawnThresholdZ : float = 180.0f
    - snailSpawnXOffset : float = 3.75f
    - <<const>> SNAIL_SPAWN_Y_POSITION : float = 0.5f
    - groundSpawner : GroundSpawner
    - Start() : void
    - OnTriggerExit(other:Collider) : void
    + SpawnSnails() : void
    - GetRandomPointInCollider(collider:Collider) : Vector3
}
MonoBehaviour <|-- GroundTile
class SnailCoin {
    - turnSpeed : float = 90.0f
    - OnTriggerEnter(other:Collider) : void
    - Update() : void
}
MonoBehaviour <|-- SnailCoin
class CameraFollow {
    - player : Transform
    - offset : Vector3
    - Awake() : void
    - LateUpdate() : void
}
MonoBehaviour <|-- CameraFollow
class GameManager {
    + {static} Instance : GameManager <<get>>
    - gameModeOverride : ParticipantGroup
    + {static} CurrentGameMode : ParticipantGroup <<get>>
    - scoreText : Text
    - crunchSound : AudioClip
    - playerController : ToadController
    - speedIncreasePerPoint : float = 0.1f
    - _score : int
    - Awake() : void
    - Start() : void
    - WaitForFirebaseGroupAssignment() : System.Collections.IEnumerator
    - SetGameMode(group:ParticipantGroup) : void
    + IncrementScore() : void
    - UpdateScoreDisplay() : void
}
enum ParticipantGroup {
    NoOverride= 0,
    TestGroup1Text= 1,
    TestGroup2Arrows= 2,
    ControlGroupBlank= 3,
}
MonoBehaviour <|-- GameManager
GameManager +-- ParticipantGroup
class ToadController {
    - forwardSpeed : float = 10.0f
    - horizontalMovementMultiplier : float = 1.75f
    - speedIncreasePerPoint : float = 0.1f
    - horizontalBounds : float = 3.25f
    - toadAnimator : Animator
    - cutsceneRotationScript : MonoBehaviour
    - stormDrainEntrance : Transform
    - cutsceneHandler : CutsceneHandler
    - playerRigidbody : Rigidbody
    - _isAlive : bool = true
    - _cutsceneActive : bool = false
    - _horizontalInput : float
    + ForwardSpeed : float <<get>> <<set>>
    + SpeedIncreasePerPoint : float <<get>> <<set>>
    - Awake() : void
    - FixedUpdate() : void
    - Update() : void
    - HandlePlayerMovement() : void
    - HandleCutsceneMovement() : void
    - OnTriggerEnter(other:Collider) : void
    + StartDrainCutscene() : void
}
MonoBehaviour <|-- ToadController
class GroundSpawner {
    - groundTile : GameObject
    - nextSpawnPoint : Vector3
    + SpawnTile(spawnItems:bool) : void
    - Start() : void
}
MonoBehaviour <|-- GroundSpawner
class ImageFlasher {
    + {static} Instance : ImageFlasher <<get>>
    - carTextToFlash : RawImage
    - carArrowToFlash : RawImage
    - stormTextToFlash : RawImage
    - stormArrowToFlash : RawImage
    - whiteImg : RawImage
    - blackImg : RawImage
    - scoreText : Text
    - flashDuration : float = 0.033f
    - _flashWait : WaitForSecondsRealtime
    - _currentFlashCoroutine : Coroutine
    - Awake() : void
    - DisableImageState() : void
    + TriggerCarFlash() : void
    + TriggerStormFlash() : void
    - HandleCarFlash() : IEnumerator
    - HandleStormFlash() : IEnumerator
    - FadeImageAlpha(image:RawImage, startAlpha:float, endAlpha:float, frameCount:int) : IEnumerator
}
class CoroutineUtils <<static>> {
    + {static} WaitForFrames(frames:int) : IEnumerator
}
MonoBehaviour <|-- ImageFlasher
@enduml
